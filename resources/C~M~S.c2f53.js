(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{504:function(e,t,i){(function(t){var n=i(463),o=i(501),a=i(485),s=i(527),r=null;function l(){if(null==r&&(r=a.getLocalItem('Coremail.XT5.State')),null==r&&(r=function(){var e=o.get('Coremail.XT5');if(null==e)return null;var t={common:{}};return n.each(s.deserialize(e),(function(e,i){t.common[e]={value:i}})),o.remove('Coremail.XT5',{path:'/'}),a.setLocalItem('Coremail.XT5.State',t),t}()),null==r&&(r={common:{}}),'string'==typeof r)try{r=JSON.parse(r)}catch(e){r={common:{}}}return r.hasOwnProperty('timeout')&&r.hasOwnProperty('value')&&(r=r.value),r}function d(e){if(null==e)return null;'string'==typeof e&&(e={key:e});var t,i=e.section||'common',n=e.key,o=l();return n&&o[i]&&(t=o[i][n])?t.timeout&&t.timeout<(new Date).getTime()?null:t.value:null}function c(e,i){var n=(e=t.isSTR(e)?{key:e}:e||{}).key,o=e.section||'common',s=t.isNUM(e.timeout)&&e.timeout;if(!n)return!1;var r=l();if(null==(i=null==i?e.value:i)){var d=r[o];d&&delete d[n],t.isEmpty(d)&&delete r[o]}else r[o]=r[o]||{},r[o][n]=s?{value:i,timeout:s}:{value:i};a.setLocalItem('Coremail.XT5.State',r)}e.exports={get:d,getInt:function(e,t){var i=d.apply(null,arguments);return i='boolean'==typeof i?Number(i):parseInt(i,10),t=parseInt(t,10),isNaN(t)&&(t=0),isNaN(i)&&(i=t),i},getBoolean:function(e,t){var i=d.apply(null,arguments);return'boolean'==typeof i?i:(null==t&&(t=!1),null==i&&(i=t),!!i&&'false'!==i&&'undefined'!==i&&'null'!==i&&'0'!==i)},getFloat:function(e,t){var i=d.apply(null,arguments);return i='boolean'==typeof i?Number(i):parseFloat(i),t=parseFloat(t),isNaN(t)&&(t=0),isNaN(i)&&(i=t),i},set:c,remove:function(e){return null==e?new Error('parameter options can\'t be null.'):('string'==typeof e&&(e={key:e}),e.hasOwnProperty('key')?(delete e.value,c(e)):new Error('parameter options has no key filed.'))}}}).call(this,i(464))},521:function(e,t,i){(function(t,n){var o=i(464),a=i(468).get;var s,r,l;e.exports={getAccList:function(e){return t.wmCall('mbox:listAttachments',o.assign({skipLockedFolders:!0,desc:!0,order:'date'},e)).then((function(e,i){return t.resolve(e||[],i)}))},getPNfFolderStructure:function(e,i,n,o){return t.wmCall({url:'/XT5/jsp/file.jsp',func:'file:getPNfFolderStructure',fid:e||0,listTree:!1!==i,listFolders:!1!==n,listFiles:!1!==o})},getENfFolderStructure:function(e){return t.wmCall({func:'file:getENfFolderStructure',uid:a('file.enfuid'),fid:e,url:'/XT5/jsp/file.jsp'})},getTrsFiles:function(e){return t.wmCall('nf:listFiles',o.assign({fid:a('file.trsfid')},e))},validateName:function(e,t){var i,o,a,s='%\'"\\/:*?<>|=,#^',r={isValid:!0,msg:null};return(t='boolean'!=typeof t||t)?(i=n('file/msg_tips_filename_empty'),o=n('file/msg_tips_filename_toolong'),a=n('file/msg_tips_filename_error')):(i=n('file/msg_tips_foldername_empty'),o=n('file/msg_tips_foldername_toolong'),a=n('file/msg_tips_foldername_error'),s='%\'"\\/:*?<>|=,.#^'),e.length<=0?(r.isValid=!1,r.msg=i,r):e.length>200?(r.isValid=!1,r.msg=o.replace('{0}',200).replace('{1}',Math.floor(100)),r):function(e,t){for(var i=!1,n=0;n<e.length;n++)if(t.indexOf(e[n])>=0){i=!0;break}return i}(e,s)?(r.isValid=!1,r.msg=a.replace('{0}',s),r):r},xnfTokens:(s=a('file.xnfConfig'),r=s.engines,l=s.tokens,o.mapFilter(l,(function(e,t){if(e.linked){var i=e.engine,n=o.assign(r[i],{key:i});return{name:e.name||n.name,token:t,engine:n,account:e.account}}}))),xnfPreferAttachURL:'url'===a('file.xnfPreferAttach')}}).call(this,i(466),i(465))},530:function(e,t,i){(function(t,n,o){i(803),i(804);var a=t.fn.zTree,s=a.consts;function r(e,i,s,r,c,h,u,f){var p,m,g=t('#'+e),v=g.parent(),b=i?a.init(g,{view:n.assign({showLine:!1,showIcon:!1,selectedMulti:!1,dblClickExpand:!1},u),async:{enable:!0,url:1,load:function(e,t){return o.when(n.isFUN(i)?i(t&&t.id,t):!t&&i)},dataFilter:function(e,t,i){return s(i,t&&t.id,t)}},callback:n.assign({onNodeCreated:function(e,i,n){t('#'+n.tId+'_a').attr('title',n.name)},onAsyncSuccess:function(e,t,i,n){i||r(n)},beforeClick:function(e,t){if(c&&!1===c(t.id,t))return!1;d(b,t,!t.open||t.id!==p),m=1},onSelected:function(e,i){var n=m;m=0,h&&l(b,i,(function(){h(i.id,i,i.id===p,!!n),p=i.id}));var o=t('#'+i.tId),a=o.position().top;(a<0||a+72>v.height())&&v.scrollTo(o,300)}},f)}):a.getZTreeObj(e);return b}s.className.BUTTON='button iconfont',e.exports=r;var l=function(e,t,i){t.children?i():e.reAsyncChildNodes(t,0,1,i)},d=r.expand=function(e,t,i){e.expandNode(t,!1!==i,!1,!1,!0)};r.select=function p(e,t,i,o){var a=[].concat(t),s=e.getNodeByParam('id',t=a.pop());i&&t&&!s?e.getNodes()[0]&&i(t).then((function(n){n?p(e,[t].concat(n)):t!==o&&p(e,o,i)})):a[0]?s&&l(e,s,n.fun(p,[e,a])):s?(e.selectNode(s),d(e,s)):null!=o&&t!==o&&p(e,o)};var c=a._z,h=c.tools,u=c.view,f=c.data;u.asyncNode=function(e,t,i,n){var o=f.nodeIsParent(e,t);if(t&&!o)return h.apply(n),!1;if(t&&t.isAjaxing)return!1;if(0==h.apply(e.callback.beforeAsync,[e.treeId,t],!0))return h.apply(n),!1;t&&(t.isAjaxing=!0);var a=f.getRoot(e)._ver;return e.async.load(e.treeId,t).then((function(o){a==f.getRoot(e)._ver&&(t&&(t.isAjaxing=null,t.zAsync=!0),u.setNodeLineIcos(e,t),o&&''!==o?(o=h.apply(e.async.dataFilter,[e.treeId,t,o],o),u.addNodes(e,t,-1,o?h.clone(o):[],!!i)):u.addNodes(e,t,-1,[],!!i),e.treeObj.trigger(s.event.ASYNC_SUCCESS,[e.treeId,t,o]),h.apply(n))}),(function(i){if(a==f.getRoot(e)._ver){t&&(t.isAjaxing=null),u.setNodeLineIcos(e,t);e.treeObj.trigger(s.event.ASYNC_ERROR,[e.treeId,t,null,-1,i])}})),!0}}).call(this,i(463),i(464),i(466))},546:function(e,t,i){var n,o,a;o=[i(463),i(492)],(a='function'==typeof(n=function(e){var t,i=0,n=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(i){var n,o,a;for(a=0;null!=(o=i[a]);a++)try{(n=e._data(o,'events'))&&n.remove&&e(o).triggerHandler('remove')}catch(s){}t(i)}),e.widget=function(t,i,n){var o,a,s,r={},l=t.split('.')[0],d=l+'-'+(t=t.split('.')[1]);return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[':'][d.toLowerCase()]=function(t){return!!e.data(t,d)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,(function(t,n){e.isFunction(n)?r[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=a,t}}():r[t]=n})),a.prototype=e.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||t},r,{constructor:a,namespace:l,widgetName:t,widgetFullName:d}),o?(e.each(o._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+'.'+n.widgetName,a,i._proto)})),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var i,o,a=n.call(arguments,1),s=0,r=a.length;s<r;s++)for(i in a[s])o=a[s][i],a[s].hasOwnProperty(i)&&o!==undefined&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(a){var s='string'==typeof a,r=n.call(arguments,1),l=this;return s?this.length||'instance'!==a?this.each((function(){var i,n=e.data(this,o);return'instance'===a?(l=n,!1):n?e.isFunction(n[a])&&'_'!==a.charAt(0)?(i=n[a].apply(n,r))!==n&&i!==undefined?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error('no such method \''+a+'\' for '+t+' widget instance'):e.error('cannot call methods on '+t+' prior to initialization; attempted to call method \''+a+'\'')})):l=undefined:(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each((function(){var t=e.data(this,o);t?(t.option(a||{}),t._init&&t._init()):e.data(this,o,new i(a,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:'widget',widgetEventPrefix:'',defaultElement:'<div>',options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace='.'+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger('create',null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,i){t._removeClass(i,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr('aria-disabled'),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if('string'==typeof t)if(s={},n=t.split('.'),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(t=n.pop(),1===arguments.length)return o[t]===undefined?null:o[t];o[t]=i}else{if(1===arguments.length)return this.options[t]===undefined?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return'classes'===e&&this._setOptionClasses(t),this.options[e]=t,'disabled'===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+'-disabled',null,!!e),e&&(this._removeClass(this.hoverable,null,'ui-state-hover'),this._removeClass(this.focusable,null,'ui-state-focus'))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(o,a){var s,r;for(r=0;r<o.length;r++)s=n.classesElementLookup[o[r]]||e(),s=t.add?e(e.unique(s.get().concat(t.element.get()))):e(s.not(t.element).get()),n.classesElementLookup[o[r]]=s,i.push(o[r]),a&&t.classes[o[r]]&&i.push(t.classes[o[r]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:'_untrackClassesElement'}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),i.join(' ')},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,(function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))}))},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n='boolean'==typeof n?n:i;var o='string'==typeof e||null===e,a={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return a.element.toggleClass(this._classes(a),n),this},_on:function(t,i,n){var o,a=this;'boolean'!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,(function(n,s){function r(){if(t||!0!==a.options.disabled&&!e(this).hasClass('ui-state-disabled'))return('string'==typeof s?a[s]:s).apply(a,arguments)}'string'!=typeof s&&(r.guid=s.guid=s.guid||r.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];c?o.on(d,c,r):i.on(d,r)}))},_off:function(t,i){i=(i||'').split(' ').join(this.eventNamespace+' ')+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout((function(){return('string'==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,'ui-state-hover')},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,'ui-state-hover')}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,'ui-state-focus')},focusout:function(t){this._removeClass(e(t.currentTarget),null,'ui-state-focus')}})},_trigger:function(t,i,n){var o,a,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(o in a)o in i||(i[o]=a[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:'fadeIn',hide:'fadeOut'},(function(t,i){e.Widget.prototype['_'+t]=function(n,o,a){var s;'string'==typeof o&&(o={effect:o});var r=o?!0===o||'number'==typeof o?i:o.effect||i:t;'number'==typeof(o=o||{})&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=a,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[r]?n[t](o):r!==t&&n[r]?n[r](o.duration,o.easing,a):n.queue((function(i){e(this)[t](),a&&a.call(n[0]),i()}))}})),e.widget})?n.apply(t,o):n)===undefined||(e.exports=a)},578:function(e,t,i){(function(t){var n=i(465),o=i(470).confirm,a=i(828),s=i(474);e.exports=function(e){var i,r=!1;return o(a({isConfirm:!0}),{title:n('mail/recall_mail'),onConfirm:function(){if(i=this,!r)return r=!0,i.$().mask(),s.recallMessage(e).then(d,l).either((function(){i.$().mask('hide')})),i.set('cancelTpl',''),!1}});function l(e){var o=n('mail/recall_fail'),s=n.get('mail/recall_'+(e&&e.code),o);i.set('message',a({isFail:!0,recallFailReason:s})),s===o&&t.rethrow()}function d(e){i.set('message',a({isSuccess:!0,recallData:e}))}}}).call(this,i(466))},582:function(e,t,i){(function(t){i(842),i(486);var n=i(843),o=i(463),a=i(494),s=i(479),r=i(470).confirm,l=i(465),d=i(466),c=i(507),h=i(467),u=i(521);function f(e,f,p,m){var g,v,b,w,_,y,N,C,x=f,k=u.xnfTokens[0],T=k.name,I=k.token,S=k.engine,E=S.key,z=S.feature,D='',P='',j=0,O=0,A=0,L={'click [data-action]':[function(e,i){switch(e){case'search':ie({keyCode:13});break;case'createFolder':!function(){0===v.find('.j-filebox-newfolder').length&&(b=o(de.newFolderTpl()).on('click','.j-cancel',t.stop(Z,0)).on('click','.j-confirm',t.stop(Y,0)).on('keydown','.j-folderName',(function(e){13===e.which&&(t.stop(e,0),Y())})).appendTo(C.$('.j-filelist-wrap'))).find('.j-folderName').focus();se(),oe(!0)}();break;case'rename':!function(e){0!==v.find('.j-filebox-renamefolder').length&&J();e.parents('.file-item').attr('data-isFile'),Q(e)}(i);break;case'checkAll':!function(e){'all'===e.attr('data-selectType')?(C.$('.j-file-item .checkbox:not(.rc-disabled)').attr('class','checkbox checkbox-checked'),e.attr('data-selectType','no'),e.html(l('common/op_none')),re(C.$('.j-file-item .checkbox-checked').length)):(C.$('.j-file-item .checkbox:not(.rc-disabled)').attr('class','checkbox'),e.html(l('mail/clipboard_select_all')),e.attr('data-selectType','all'),re(0))}(i)}}],'click a.j-trigger-path':[function(e,i,n){t.stop(n,0),D=e.data('fid')||'',P=e.data('path')||'',_='',W()},o],'click .j-filelist .col-chk':[function(e,t,i){/checkbox/g.test(i.target.className)||e.find('.checkbox:not(.rc-disabled)').trigger('click.crc');0===e.find('.rc-disabled').length&&(e.find('.checkbox-checked').length>0?re(A+1):re(A-1))},o],'keydown .j-search':ie};var R,$=[['c-saveTo '+(z.manage?'':'u-rename-disabled'),l('common/op_to_xnffolder').replace('{0}',T),function(){z.manage&&C.$('[data-role=foot] .u-dialog-btns').prepend(de.saveToFootTpl())},function(){var e=C.$('.c-newname').val()||m,t=u.validateName(e||'',!0);m===e||t.isValid?B(C.element,d.wmCall('xnf:saveFromMessage',{token:I,parts:f,fid:D,mboxa:p}).then((function(t){return m===e||d.wmCall('xnf:rename',{path:ce(t[0],m),destPath:ce(t[0],e),token:I})})).then((function(){o.notify.success(l('file/msg_saveto_xnf_succ'))})).onFail((function(){o.notify.error(l('file/msg_saveto_xnf_fail'))})).either((function(){C.hide()}))):C.$('.c-newname-error').html(t.msg).show();return!1}],['c-selectFrom',l('mail/compose_attach_add_from_external_nf').replace('{0}',T),function(){C.$('[data-role=foot]').prepend(o('<div class="choose-info f-fl">').html(de.selectFromFootTpl()))},function(){var e=le();if(0===e.length)return;var t=u.xnfPreferAttachURL,i=h.getConfig('user.smtpmaxsendmailsize'),n=z.shareableUrl,a=[],s=[],r=[],d=[];if(e.each((function(){var e=o(this).closest('.j-file-item'),l=e.attr('data-id'),c=e.attr('data-name');!t&&e.data('size')<i?a.push(l):n?s.push(l):d.push(c),r.push(c)})),d[0])return void o.notify.error(d.join(', ')+' '+l('mail/FA_OVERFLOW'));v.find('.j-filelist .checkbox').addClass('rc-disabled'),x(I,a,s)}]][e],F=$[0],M=$[1],U=$[2],H=$[3];function W(){j=0,re(0),y=[],V(!0)}function B(e,t){return e.mask(),t.either((function(){e.mask('destroy')}))}function V(e){B(v,_?te(e):d.wmCall({url:'/XT5/jsp/file.jsp',func:'file:getXNfFolderStructure'},o.param({token:I,fid:D,listTree:!0,listFolders:!0,listFiles:!0})).then((function(e){var t,i,n,a=e.folderTree,s=e.folderInfo,r=e.folders,l=e.files;y=[].concat(r||[],l||[]),O=y.length,X(),oe(!1),N=y.slice(),t=(a||[]).concat(s),i=o(de.folderTreeTpl({parents:t})),n=function(){var e=(i.width()-o('.c-filebox-crumb').find('li').eq(0).width())/80;if(i.find('.c-path').length>e){var t=i.find('.c-path').eq(0),a=t.find('a').data();t.remove(),i.find('.c-up').show().find('a').data(a),n()}},C.$('.j-crumb').html(i),n(),q()}))).onFail((function(){v.html(l('file/msg_xnfbox_fail'))}))}function K(e,t){v.html(de.allListTpl({isBlank:!y[0],blankMsg:t,listResult:e,feature:z})).customRadioCheckbox()}function q(){K(y.slice(j,j+20),l('file/msg_list_pnf_folder_blank'));var t=ae()&&0===e;t&&C.$('.col-rename').hide(),C.$('[data-role=confirm]').toggleClass('disabled',t),0===e&&z.manage&&v.append(de.attachmentInfoTpl({filename:m}))}function X(){C.$('.j-pagination').pagination({total:O,limit:20,currentPage:0,menu:!1,round:!0,prevText:'<span class="iconfont iconprevious"></span>',nextText:'<span class="iconfont iconnext"></span>',callback:function(e){re(0),j=20*e,(_?V:q)()}})}function Z(){ne(),oe(!1)}function Y(){var e=b.find('.j-folderName').val(),t=u.validateName(e,!1);t.isValid?he(e)?ee(b,l('file/msg_tips_foldername_repeat')):d.wmCall('xnf:createFolder',{path:D+'/'+e,token:I,hintWithParents:!0}).then((function(e){N.push(e),y.push(e),O++,ne(),K(y),se(),oe(!1)})).onFail((function(){ee(b,l('file/msg_tips_foldername_common'))})):ee(b,t.msg)}function G(){var e=w.prev().text(),t=w.find('.j-folderName').val(),i=u.validateName(t,!1);if(t===e)return J(),!1;i.isValid?he(t)?ee(w,l('file/msg_tips_foldername_repeat')):d.wmCall('xnf:rename',{path:D+'/'+e,destPath:D+'/'+t,token:I}).then((function(t){w.prev().text(t.name),w.prev().attr('data-fid',t.id),w.prev().attr('data-path',t.path),w.prev().parent().attr('title',t.name),J(),o.each(N,(function(t,i){i&&i.path===D+'/'+e&&N.splice(t,1)}))})).onFail((function(){ee(w,l('file/msg_tips_foldername_common'))})):ee(w,i.msg)}function J(){w&&(w.closest('.file-item').removeClass('c-rename-tr'),w.remove(),w=null)}function Q(e){var i=e.closest('.file-item').addClass('c-rename-tr').find('.col-name');(w=o(de.renameFolderTpl({val:i.attr('title')})).on('click','.j-cancel',t.stop(J,0)).on('click','.j-confirm',t.stop(G,0)).on('keydown','.j-folderName',(function(e){13===e.which&&(t.stop(e,0),G())})).appendTo(i)).find('.j-folderName').focus()}function ee(e,t){var n=function(t){var n=e.find('.j-folderName').toggleClass('error',!!t);i(481).LE8&&n.parent().css('top',t?-12:-2),e.find('.j-explain').html(t),e===w&&w.closest('.file-item').height(t?63:36)};R&&clearTimeout(R),n(t),R=setTimeout(n.bind(C,''),2e3),e===b?se():C.$('.j-filelist-wrap').scrollTop(C.$('.j-filelist-wrap').scrollTop()+30)}r(n(),{subClass:'c-filebox-dialog '+F,height:600,width:650,title:M,events:L,afterShow:function(){g=(C=this).$('.c-xnffilebox').eq(0),v=g.find('.c-filebox-content').eq(0),setTimeout(U),W()},onConfirm:function(){return!C.$('[data-role=confirm]').hasClass('disabled')&&H&&H()}});var te=function(e){return d.wmCall('xnf:search',{token:I,fid:P,query:_,start:j,limit:20,returnTotal:!0}).then((function(t,i){var n=i.total;y=t,O=n,e&&X(),C.$('.j-search-result').show(),K(y,l('file/msg_list_pnf_search_blank'))}))};function ie(e){(_=C.$('.j-search').val())&&13===e.keyCode&&W()}var ne=function(){b&&(b.remove(),b=null)};function oe(e){var t=C.$('[data-action=createFolder]');e=e||ae(),t.prop('disabled',e).toggleClass('disabled',e)}function ae(){return'AnyShare'===E&&!D}function se(){C.$('.j-filelist-wrap').stop().animate({scrollTop:C.$('.j-filelist').height()+C.$('.j-filebox-newfolder').height()-C.$('.j-filelist-wrap').height()+10},500)}function re(e){C.$('[data-role=foot] .fileCount').html(l('file/msg_tips_choose_file_count').replace('{0}',A=e))}var le=function(){return v.find('.j-filelist .j-file-item i.checkbox-checked').prev('input.j-item-chk[type="checkbox"]')},de=n.helpers({GetDateMD:function(e){if(e)return new a.SafeString(s(e).format('MM-DD'))},GetFileIco:function(e,t){return e&&t?t+c.formatFileType(e):''}});function ce(e,t){return e.substring(0,e.lastIndexOf('/')+1)+t}var he=function(e){return N.some((function(t){return t.name===e}))}}e.exports={save:f.bind(0,0),select:f.bind(0,1)}}).call(this,i(464))},584:function(e,t,i){var n,o,a;o=[i(463),i(637),i(872),i(873),i(492),i(546)],(a='function'==typeof(n=function(e){return e.widget('ui.resizable',e.ui.mouse,{version:'1.12.1',widgetEventPrefix:'resize',options:{alsoResize:!1,animate:!1,animateDuration:'slow',animateEasing:'swing',aspectRatio:!1,autoHide:!1,classes:{'ui-resizable-se':'ui-icon ui-icon-gripsmall-diagonal-se'},containment:!1,ghost:!1,grid:!1,handles:'e,s,se',helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if('hidden'===e(t).css('overflow'))return!1;var n,o=i&&'left'===i?'scrollLeft':'scrollTop';return t[o]>0||(t[o]=1,n=t[o]>0,t[o]=0,n)},_create:function(){var t,i=this.options,n=this;this._addClass('ui-resizable'),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||'ui-resizable-helper':null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e('<div class=\'ui-wrapper\' style=\'overflow: hidden;\'></div>').css({position:this.element.css('position'),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css('top'),left:this.element.css('left')})),this.element=this.element.parent().data('ui-resizable',this.element.resizable('instance')),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css('marginTop'),marginRight:this.originalElement.css('marginRight'),marginBottom:this.originalElement.css('marginBottom'),marginLeft:this.originalElement.css('marginLeft')},this.element.css(t),this.originalElement.css('margin',0),this.originalResizeStyle=this.originalElement.css('resize'),this.originalElement.css('resize','none'),this._proportionallyResizeElements.push(this.originalElement.css({position:'static',zoom:1,display:'block'})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on('mouseenter',(function(){i.disabled||(n._removeClass('ui-resizable-autohide'),n._handles.show())})).on('mouseleave',(function(){i.disabled||n.resizing||(n._addClass('ui-resizable-autohide'),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData('resizable').removeData('ui-resizable').off('.resizable').find('.ui-resizable-handle').remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css('position'),width:t.outerWidth(),height:t.outerHeight(),top:t.css('top'),left:t.css('left')}).insertAfter(t),t.remove()),this.originalElement.css('resize',this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case'handles':this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,o,a,s=this.options,r=this;if(this.handles=s.handles||(e('.ui-resizable-handle',this.element).length?{n:'.ui-resizable-n',e:'.ui-resizable-e',s:'.ui-resizable-s',w:'.ui-resizable-w',se:'.ui-resizable-se',sw:'.ui-resizable-sw',ne:'.ui-resizable-ne',nw:'.ui-resizable-nw'}:'e,s,se'),this._handles=e(),this.handles.constructor===String)for('all'===this.handles&&(this.handles='n,e,s,w,se,sw,ne,nw'),n=this.handles.split(','),this.handles={},i=0;i<n.length;i++)o='ui-resizable-'+(t=e.trim(n[i])),a=e('<div>'),this._addClass(a,'ui-resizable-handle '+o),a.css({zIndex:s.zIndex}),this.handles[t]='.ui-resizable-'+t,this.element.append(a);this._renderAxis=function(t){var i,n,o,a;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=['padding',/ne|nw|n/.test(i)?'Top':/se|sw|s/.test(i)?'Bottom':/^e$/.test(i)?'Right':'Left'].join(''),t.css(o,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find('.ui-resizable-handle')),this._handles.disableSelection(),this._handles.on('mouseover',(function(){r.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=a&&a[1]?a[1]:'se')})),s.autoHide&&(this._handles.hide(),this._addClass('ui-resizable-autohide'))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,a=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css('left')),n=this._num(this.helper.css('top')),a.containment&&(i+=e(a.containment).scrollLeft()||0,n+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio='number'==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e('.ui-resizable-'+this.axis).css('cursor'),e('body').css('cursor','auto'===o?this.axis+'-resize':o),this._addClass('ui-resizable-resizing'),this._propagate('start',t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,a=this.axis,s=t.pageX-o.left||0,r=t.pageY-o.top||0,l=this._change[a];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,s,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate('resize',t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger('resize',t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,o,a,s,r,l,d=this.options;return this._helper&&(o=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],'left')?0:this.sizeDiff.height,a=n?0:this.sizeDiff.width,s={width:this.helper.width()-a,height:this.helper.height()-o},r=parseFloat(this.element.css('left'))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css('top'))+(this.position.top-this.originalPosition.top)||null,d.animate||this.element.css(e.extend(s,{top:l,left:r})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e('body').css('cursor','auto'),this._removeClass('ui-resizable-resizing'),this._propagate('stop',t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+'px'),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+'px'),this.size.width!==this.prevSize.width&&(e.width=this.size.width+'px'),this.size.height!==this.prevSize.height&&(e.height=this.size.height+'px'),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o,a,s=this.options;a={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:Infinity,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:Infinity},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),n>a.minHeight&&(a.minHeight=n),i<a.maxWidth&&(a.maxWidth=i),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),'sw'===n&&(e.left=t.left+(i.width-e.width),e.top=null),'nw'===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),s&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&d&&(e.left=r-t.minWidth),n&&d&&(e.left=r-t.maxWidth),s&&c&&(e.top=l-t.minHeight),o&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css('borderTopWidth'),e.css('borderRightWidth'),e.css('borderBottomWidth'),e.css('borderLeftWidth')],o=[e.css('paddingTop'),e.css('paddingRight'),e.css('paddingBottom'),e.css('paddingLeft')];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e('<div style=\'overflow:hidden;\'></div>'),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:'absolute',left:this.elementOffset.left+'px',top:this.elementOffset.top+'px',zIndex:++i.zIndex}),this.helper.appendTo('body').disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),'resize'!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add('resizable','animate',{stop:function(t){var i=e(this).resizable('instance'),n=i.options,o=i._proportionallyResizeElements,a=o.length&&/textarea/i.test(o[0].nodeName),s=a&&i._hasScroll(o[0],'left')?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-s},d=parseFloat(i.element.css('left'))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css('top'))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css('width')),height:parseFloat(i.element.css('height')),top:parseFloat(i.element.css('top')),left:parseFloat(i.element.css('left'))};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate('resize',t)}})}}),e.ui.plugin.add('resizable','containment',{start:function(){var t,i,n,o,a,s,r,l=e(this).resizable('instance'),d=l.options,c=l.element,h=d.containment,u=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;u&&(l.containerElement=e(u),/document/.test(h)||h===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(u),i=[],e(['Top','Right','Left','Bottom']).each((function(e,n){i[e]=l._num(t.css('padding'+n))})),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,s=l._hasScroll(u,'left')?u.scrollWidth:a,r=l._hasScroll(u)?u.scrollHeight:o,l.parentData={element:u,left:n.left,top:n.top,width:s,height:r}))},resize:function(t){var i,n,o,a,s=e(this).resizable('instance'),r=s.options,l=s.containerOffset,d=s.position,c=s._aspectRatio||t.shiftKey,h={top:0,left:0},u=s.containerElement,f=!0;u[0]!==document&&/static/.test(u.css('position'))&&(h=l),d.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),c&&(s.size.height=s.size.width/s.aspectRatio,f=!1),s.position.left=r.helper?l.left:0),d.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,f=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),a=/relative|absolute/.test(s.containerElement.css('position')),o&&a?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),i=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-h.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-h.top:s.offset.top-l.top)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,c&&(s.size.height=s.size.width/s.aspectRatio,f=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,c&&(s.size.width=s.size.height*s.aspectRatio,f=!1)),f||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable('instance'),i=t.options,n=t.containerOffset,o=t.containerPosition,a=t.containerElement,s=e(t.helper),r=s.offset(),l=s.outerWidth()-t.sizeDiff.width,d=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css('position'))&&e(this).css({left:r.left-o.left-n.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(a.css('position'))&&e(this).css({left:r.left-o.left-n.left,width:l,height:d})}}),e.ui.plugin.add('resizable','alsoResize',{start:function(){var t=e(this).resizable('instance').options;e(t.alsoResize).each((function(){var t=e(this);t.data('ui-resizable-alsoresize',{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css('left')),top:parseFloat(t.css('top'))})}))},resize:function(t,i){var n=e(this).resizable('instance'),o=n.options,a=n.originalSize,s=n.originalPosition,r={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0};e(o.alsoResize).each((function(){var t=e(this),n=e(this).data('ui-resizable-alsoresize'),o={},a=t.parents(i.originalElement[0]).length?['width','height']:['width','height','top','left'];e.each(a,(function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(o[t]=i||null)})),t.css(o)}))},stop:function(){e(this).removeData('ui-resizable-alsoresize')}}),e.ui.plugin.add('resizable','ghost',{start:function(){var t=e(this).resizable('instance'),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:'block',position:'relative',height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,'ui-resizable-ghost'),!1!==e.uiBackCompat&&'string'==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable('instance');t.ghost&&t.ghost.css({position:'relative',height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable('instance');t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add('resizable','grid',{resize:function(){var t,i=e(this).resizable('instance'),n=i.options,o=i.size,a=i.originalSize,s=i.originalPosition,r=i.axis,l='number'==typeof n.grid?[n.grid,n.grid]:n.grid,d=l[0]||1,c=l[1]||1,h=Math.round((o.width-a.width)/d)*d,u=Math.round((o.height-a.height)/c)*c,f=a.width+h,p=a.height+u,m=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<p,v=n.minWidth&&n.minWidth>f,b=n.minHeight&&n.minHeight>p;n.grid=l,v&&(f+=d),b&&(p+=c),m&&(f-=d),g&&(p-=c),/^(se|s|e)$/.test(r)?(i.size.width=f,i.size.height=p):/^(ne)$/.test(r)?(i.size.width=f,i.size.height=p,i.position.top=s.top-u):/^(sw)$/.test(r)?(i.size.width=f,i.size.height=p,i.position.left=s.left-h):((p-c<=0||f-d<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),p-c>0?(i.size.height=p,i.position.top=s.top-u):(p=c-t.height,i.size.height=p,i.position.top=s.top+a.height-p),f-d>0?(i.size.width=f,i.position.left=s.left-h):(f=d-t.width,i.size.width=f,i.position.left=s.left+a.width-f))}}),e.ui.resizable})?n.apply(t,o):n)===undefined||(e.exports=a)},634:function(e,t,i){(function(t,n){var o=i(841),a=i(463),s=i(484).sendMessage,r=i(470).confirm,l=i(465),d=i(467).getFolderLockedStatus,c=i(468).get,h=i(521),u=i(493).init,f={title:l('common/op_to_netfolder'),subClass:'c-filebox-dialog',height:464,width:526};e.exports=function(e,i,p,m){var g,v,b,w,_,y=c('file.nfrootid'),N=[],C=c('file.ispermitnf');function x(){v.html(o.forbiddenTpl())}function k(){var e=g.$('.'+g.get('classPrefix')+'-operation');v.html(l('file/msg_filebox_loading')),e.find('.j-newFolder')[0]||(w=a('<button class="u-btn u-btn-primary">'+l('main/bt_createfolder')+'</button>').addClass('j-newFolder').click(t.stop(S,0)).appendTo(e)),j(!1),h.getPNfFolderStructure(y,!0,!0,!1).then((function(e){var t,i,n,s=e.folderTree,r=e.folders,l=e.folderInfo;N=r,s.reverse().forEach((function(e){e.id=e.fid})),t=s.concat(l),i=a(o.folderTreeTpl({parents:t})),n=function(){if(i[0].scrollHeight>i.outerHeight()+3){var e=i.find('.j-parentPath'),t=e.data('fid');e.remove();var o=i.find('.j-hiddenPath');o.removeClass('f-dn'),o.data('fid',t),o.find('a').data('fid',t),n()}},g.$('.j-crumb').html(i),n(),T()})).onFail((function(){v.html(l('file/msg_list_pnf_fail'))}))}function T(){v.html(o.folderListTpl({isBlank:!N[0],blankMsg:l('file/msg_list_pnf_folder_blank'),subFolders:N}))}function I(e){var t=function(e){b.find('.j-folderName').toggleClass('error',!!e),b.find('.j-explain').html(e)};_&&clearTimeout(_),t(e),_=setTimeout(t.bind(g,''),2e3),O()}function S(){v.find('.j-filebox-newfolder')[0]||(b=a(o.newFolderTpl()).on('click','.j-cancel',t.stop(E,0)).on('click','.j-confirm',t.stop(z,0)).on('keydown','.j-folderName',(function(e){13===e.which&&(t.stop(e,0),z())})).appendTo(v)).find('.j-folderName').focus(),O(),j(!0)}function E(){P(),j(!1)}function z(){var e=b.find('.j-folderName').val(),t=h.validateName(e,!1);t.isValid?N.some((function(t){return t.name===e}))?I(l('file/msg_tips_foldername_repeat')):n.wmCall('nf:createUserFolders',{items:[{parent:y,name:e}]}).then((function(t){var i=t[0];N.push({id:i,name:e}),P(),T(),O(),j(!1)})).onFail((function(){I(l('file/msg_tips_foldername_common'))})):I(t.msg)}function D(){d(!0).isAuth?k():(v.html(o.auth2Tpl()),u(v.find('.c-filebox-auth2lock-wrap'),k))}function P(){b&&(b.remove(),b=null)}function j(e){w&&(e='boolean'==typeof e&&e,w.prop('disabled',e),e?w.addClass('disabled'):w.removeClass('disabled'))}function O(){var e=v.parent(),t=e.height(),i=e[0].scrollHeight;t<i&&e.stop().animate({scrollTop:i},500)}r(o(),t.assign({},f,{events:{'click a.j-trigger-path':t.stop((function(e,t){y=a(t).data('fid'),D()}),0)},afterShow:function(){v=(g=this).$('.j-filelist-wrap'),(C?D:x)()},onConfirm:function(){if(!d(!0).isAuth)return void a.notify.error(l('file/msg_saveto_nf_fail_auth2'));g.element.mask();var t={id:i,parts:e,fid:y,mboxa:p},o='mbox:saveMessageToNF';m&&(o='mbox:decryptMessageToNF',t.password=m);return n.wmCall(o,t).then((function(){s('file.personalnf','fileSavedToNF'),a.notify.success(l('file/msg_saveto_nf_succ'))})).onFail((function(e){switch(e.code){case'FA_OVERFLOW':a.notify.error(l('file/msg_saveto_nf_fail_overflow'));break;default:a.notify.error(l('file/msg_saveto_nf_fail'))}})).either((function(){g.element.mask('destroy'),g.hide()})),!1}}))}}).call(this,i(464),i(466))},637:function(e,t,i){var n,o,a;o=[i(463),i(638),i(492),i(546)],(a='function'==typeof(n=function(e){var t=!1;return e(document).on('mouseup',(function(){t=!1})),e.widget('ui.mouse',{version:'1.12.1',options:{cancel:'input, textarea, button, select, option',distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on('mousedown.'+this.widgetName,(function(e){return t._mouseDown(e)})).on('click.'+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+'.preventClickEvent'))return e.removeData(i.target,t.widgetName+'.preventClickEvent'),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off('.'+this.widgetName),this._mouseMoveDelegate&&this.document.off('mousemove.'+this.widgetName,this._mouseMoveDelegate).off('mouseup.'+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,a=!('string'!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(o&&!a&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===e.data(i.target,this.widgetName+'.preventClickEvent')&&e.removeData(i.target,this.widgetName+'.preventClickEvent'),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on('mousemove.'+this.widgetName,this._mouseMoveDelegate).on('mouseup.'+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off('mousemove.'+this.widgetName,this._mouseMoveDelegate).off('mouseup.'+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+'.preventClickEvent',!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(t,o):n)===undefined||(e.exports=a)},638:function(e,t,i){var n,o,a;o=[i(463),i(492)],(a='function'==typeof(n=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(t,o):n)===undefined||(e.exports=a)},804:function(module,exports,__webpack_require__){(function(jQuery){!function($){var settings={},roots={},caches={},_consts={className:{BUTTON:'button',LEVEL:'level',ICO_LOADING:'ico_loading',SWITCH:'switch',NAME:'node_name'},event:{NODECREATED:'ztree_nodeCreated',CLICK:'ztree_click',EXPAND:'ztree_expand',COLLAPSE:'ztree_collapse',ASYNC_SUCCESS:'ztree_async_success',ASYNC_ERROR:'ztree_async_error',REMOVE:'ztree_remove',SELECTED:'ztree_selected',UNSELECTED:'ztree_unselected'},id:{A:'_a',ICON:'_ico',SPAN:'_span',SWITCH:'_switch',UL:'_ul'},line:{ROOT:'root',ROOTS:'roots',CENTER:'center',BOTTOM:'bottom',NOLINE:'noline',LINE:'line'},folder:{OPEN:'open',CLOSE:'close',DOCU:'docu'},node:{CURSELECTED:'curSelectedNode'}},_setting={treeId:'',treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:'fast',fontCss:{},nodeClasses:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{isParent:'isParent',children:'children',name:'name',title:'',url:'url',icon:'icon'},render:{name:null,title:null},simpleData:{enable:!1,idKey:'id',pIdKey:'pId',rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:'application/x-www-form-urlencoded',type:'post',dataType:'text',headers:{},xhrFields:{},url:'',autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),data.nodeChildren(e,t,[]),t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(e){var t=e.treeObj,i=consts.event;t.bind(i.NODECREATED,(function(t,i,n){tools.apply(e.callback.onNodeCreated,[t,i,n])})),t.bind(i.CLICK,(function(t,i,n,o,a){tools.apply(e.callback.onClick,[i,n,o,a])})),t.bind(i.EXPAND,(function(t,i,n){tools.apply(e.callback.onExpand,[t,i,n])})),t.bind(i.COLLAPSE,(function(t,i,n){tools.apply(e.callback.onCollapse,[t,i,n])})),t.bind(i.ASYNC_SUCCESS,(function(t,i,n,o){tools.apply(e.callback.onAsyncSuccess,[t,i,n,o])})),t.bind(i.ASYNC_ERROR,(function(t,i,n,o,a,s){tools.apply(e.callback.onAsyncError,[t,i,n,o,a,s])})),t.bind(i.REMOVE,(function(t,i,n){tools.apply(e.callback.onRemove,[t,i,n])})),t.bind(i.SELECTED,(function(t,i,n){tools.apply(e.callback.onSelected,[i,n])})),t.bind(i.UNSELECTED,(function(t,i,n){tools.apply(e.callback.onUnSelected,[i,n])}))},_unbindEvent=function(e){var t=e.treeObj,i=consts.event;t.unbind(i.NODECREATED).unbind(i.CLICK).unbind(i.EXPAND).unbind(i.COLLAPSE).unbind(i.ASYNC_SUCCESS).unbind(i.ASYNC_ERROR).unbind(i.REMOVE).unbind(i.SELECTED).unbind(i.UNSELECTED)},_eventProxy=function(e){var t=e.target,i=data.getSetting(e.data.treeId),n='',o=null,a='',s='',r=null,l=null,d=null;if(tools.eqs(e.type,'mousedown')?s='mousedown':tools.eqs(e.type,'mouseup')?s='mouseup':tools.eqs(e.type,'contextmenu')?s='contextmenu':tools.eqs(e.type,'click')?tools.eqs(t.tagName,'span')&&null!==t.getAttribute('treeNode'+consts.id.SWITCH)?(n=tools.getNodeMainDom(t).id,a='switchNode'):(d=tools.getMDom(i,t,[{tagName:'a',attrName:'treeNode'+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id,a='clickNode'):tools.eqs(e.type,'dblclick')&&(s='dblclick',(d=tools.getMDom(i,t,[{tagName:'a',attrName:'treeNode'+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id,a='switchNode')),s.length>0&&0==n.length&&(d=tools.getMDom(i,t,[{tagName:'a',attrName:'treeNode'+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id),n.length>0)switch(o=data.getNodeCache(i,n),a){case'switchNode':data.nodeIsParent(i,o)&&(tools.eqs(e.type,'click')||tools.eqs(e.type,'dblclick')&&tools.apply(i.view.dblClickExpand,[i.treeId,o],i.view.dblClickExpand))?r=handler.onSwitchNode:a='';break;case'clickNode':r=handler.onClickNode}switch(s){case'mousedown':l=handler.onZTreeMousedown;break;case'mouseup':l=handler.onZTreeMouseup;break;case'dblclick':l=handler.onZTreeDblclick;break;case'contextmenu':l=handler.onZTreeContextmenu}return{stop:!1,node:o,nodeEventType:a,nodeEventCallback:r,treeEventType:s,treeEventCallback:l}},_initNode=function(e,t,i,n,o,a,s){if(i){var r=data.getRoot(e),l=data.nodeChildren(e,i);i.level=t,i.tId=e.treeId+'_'+ ++r.zId,i.parentTId=n?n.tId:null,i.open='string'==typeof i.open?tools.eqs(i.open,'true'):!!i.open;var d=data.nodeIsParent(e,i);tools.isArray(l)?(data.nodeIsParent(e,i,!0),i.zAsync=!0):(d=data.nodeIsParent(e,i,d),i.open=!(!d||e.async.enable)&&i.open,i.zAsync=!d),i.isFirstNode=o,i.isLastNode=a,i.getParentNode=function(){return data.getNodeCache(e,i.parentTId)},i.getPreNode=function(){return data.getPreNode(e,i)},i.getNextNode=function(){return data.getNextNode(e,i)},i.getIndex=function(){return data.getNodeIndex(e,i)},i.getPath=function(){return data.getNodePath(e,i)},i.isAjaxing=!1,data.fixPIdKeyValue(e,i)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf('_')+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,i,n){var o,a=data.nodeChildren(e,t);a?i>=a.length&&(i=-1):(a=data.nodeChildren(e,t,[]),i=-1),a.length>0&&0===i?(a[0].isFirstNode=!1,view.setNodeLineIcos(e,a[0])):a.length>0&&i<0&&(a[a.length-1].isLastNode=!1,view.setNodeLineIcos(e,a[a.length-1])),data.nodeIsParent(e,t,!0),i<0?data.nodeChildren(e,t,a.concat(n)):(o=[i,0].concat(n),a.splice.apply(a,o))},addSelectedNode:function(e,t){var i=data.getRoot(e);data.isSelectedNode(e,t)||i.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&data.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,i){for(var n=0,o=_init.afterA.length;n<o;n++)_init.afterA[n].apply(this,arguments)},getBeforeA:function(e,t,i){for(var n=0,o=_init.beforeA.length;n<o;n++)_init.beforeA[n].apply(this,arguments)},getInnerAfterA:function(e,t,i){for(var n=0,o=_init.innerAfterA.length;n<o;n++)_init.innerAfterA[n].apply(this,arguments)},getInnerBeforeA:function(e,t,i){for(var n=0,o=_init.innerBeforeA.length;n<o;n++)_init.innerBeforeA[n].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var i=t.parentTId?t.getParentNode():data.getRoot(e),n=data.nodeChildren(e,i),o=0,a=n.length-1;o<=a;o++)if(n[o]===t)return o;return-1},getNextNode:function(e,t){if(!t)return null;for(var i=t.parentTId?t.getParentNode():data.getRoot(e),n=data.nodeChildren(e,i),o=0,a=n.length-1;o<=a;o++)if(n[o]===t)return o==a?null:n[o+1];return null},getNodeByParam:function(e,t,i,n){if(!t||!i)return null;for(var o=0,a=t.length;o<a;o++){var s=t[o];if(s[i]==n)return t[o];var r=data.nodeChildren(e,s),l=data.getNodeByParam(e,r,i,n);if(l)return l}return null},getNodeCache:function(e,t){if(!t)return null;var i=caches[e.treeId].nodes[data.getNodeCacheId(t)];return i||null},getNodePath:function(e,t){return t?((i=t.parentTId?t.getParentNode().getPath():[])&&i.push(t),i):null;var i},getNodes:function(e){return data.nodeChildren(e,data.getRoot(e))},getNodesByParam:function(e,t,i,n){if(!t||!i)return[];for(var o=[],a=0,s=t.length;a<s;a++){var r=t[a];r[i]==n&&o.push(r);var l=data.nodeChildren(e,r);o=o.concat(data.getNodesByParam(e,l,i,n))}return o},getNodesByParamFuzzy:function(e,t,i,n){if(!t||!i)return[];var o=[];n=n.toLowerCase();for(var a=0,s=t.length;a<s;a++){var r=t[a];'string'==typeof r[i]&&t[a][i].toLowerCase().indexOf(n)>-1&&o.push(r);var l=data.nodeChildren(e,r);o=o.concat(data.getNodesByParamFuzzy(e,l,i,n))}return o},getNodesByFilter:function(e,t,i,n,o){if(!t)return n?null:[];for(var a=n?null:[],s=0,r=t.length;s<r;s++){var l=t[s];if(tools.apply(i,[l,o],!1)){if(n)return l;a.push(l)}var d=data.nodeChildren(e,l),c=data.getNodesByFilter(e,d,i,n,o);if(n&&c)return c;a=n?c:a.concat(c)}return a},getPreNode:function(e,t){if(!t)return null;for(var i=t.parentTId?t.getParentNode():data.getRoot(e),n=data.nodeChildren(e,i),o=0,a=n.length;o<a;o++)if(n[o]===t)return 0==o?null:n[o-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,i=_init.caches.length;t<i;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,i,n,o,a){for(var s=0,r=_init.nodes.length;s<r;s++)_init.nodes[s].apply(this,arguments)},initRoot:function(e){for(var t=0,i=_init.roots.length;t<i;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,o=i.curSelectedList.length;n<o;n++)if(t===i.curSelectedList[n])return!0;return!1},nodeChildren:function(e,t,i){if(!t)return null;var n=e.data.key.children;return void 0!==i&&(t[n]=i),t[n]},nodeIsParent:function(e,t,i){if(!t)return!1;var n=e.data.key.isParent;return void 0!==i?('string'==typeof i&&(i=tools.eqs(i,'true')),i=!!i,t[n]=i):'string'==typeof t[n]?t[n]=tools.eqs(t[n],'true'):t[n]=!!t[n],t[n]},nodeName:function(e,t,i){var n=e.data.key.name;void 0!==i&&(t[n]=i);var o=''+t[n];return'function'==typeof e.data.render.name?e.data.render.name.call(this,o,t):o},nodeTitle:function(e,t){var i=''+t[''===e.data.key.title?e.data.key.name:e.data.key.title];return'function'==typeof e.data.render.title?e.data.render.title.call(this,i,t):i},removeNodeCache:function(e,t){var i=data.nodeChildren(e,t);if(i)for(var n=0,o=i.length;n<o;n++)data.removeNodeCache(e,i[n]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,o=i.curSelectedList.length;n<o;n++)t!==i.curSelectedList[n]&&data.getNodeCache(e,i.curSelectedList[n].tId)||(i.curSelectedList.splice(n,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,t]),n--,o--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var i=0,n=_init.zTreeTools.length;i<n;i++)_init.zTreeTools[i].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var i=[];if(tools.isArray(t))for(var n=0,o=t.length;n<o;n++){a(t[n])}else a(t);return i;function a(t){i.push(t);var n=data.nodeChildren(e,t);n&&(i=i.concat(data.transformToArrayFormat(e,n)))}},transformTozTreeFormat:function(e,t){var i,n,o=e.data.simpleData.idKey,a=e.data.simpleData.pIdKey;if(!o||''==o||!t)return[];if(tools.isArray(t)){var s=[],r={};for(i=0,n=t.length;i<n;i++)r[t[i][o]]=t[i];for(i=0,n=t.length;i<n;i++){var l=r[t[i][a]];if(l&&t[i][o]!=t[i][a]){var d=data.nodeChildren(e,l);d||(d=data.nodeChildren(e,l,[])),d.push(t[i])}else s.push(t[i])}return s}return[t]}},event={bindEvent:function(e){for(var t=0,i=_init.bind.length;t<i;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,i=_init.unbind.length;t<i;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},i=e.treeObj;e.view.txtSelectedEnable||i.bind('selectstart',handler.onSelectStart).css({'-moz-user-select':'-moz-none'}),i.bind('click',t,event.proxy),i.bind('dblclick',t,event.proxy),i.bind('mouseover',t,event.proxy),i.bind('mouseout',t,event.proxy),i.bind('mousedown',t,event.proxy),i.bind('mouseup',t,event.proxy),i.bind('contextmenu',t,event.proxy)},unbindTree:function(e){e.treeObj.unbind('selectstart',handler.onSelectStart).unbind('click',event.proxy).unbind('dblclick',event.proxy).unbind('mouseover',event.proxy).unbind('mouseout',event.proxy).unbind('mousedown',event.proxy).unbind('mouseup',event.proxy).unbind('contextmenu',event.proxy)},doProxy:function(e){for(var t=[],i=0,n=_init.proxys.length;i<n;i++){var o=_init.proxys[i].apply(this,arguments);if(t.push(o),o.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var i=event.doProxy(e),n=!0,o=0,a=i.length;o<a;o++){var s=i[o];s.nodeEventCallback&&(!0,n=s.nodeEventCallback.apply(s,[e,s.node])&&n),s.treeEventCallback&&(!0,n=s.treeEventCallback.apply(s,[e,s.node])&&n)}return n}},handler={onSwitchNode:function(e,t){var i=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(i.callback.beforeCollapse,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}else{if(0==tools.apply(i.callback.beforeExpand,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}return!0},onClickNode:function(e,t){var i=data.getSetting(e.data.treeId),n=i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(i,t)?0:i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&i.view.selectedMulti?2:1;return 0==tools.apply(i.callback.beforeClick,[i.treeId,t,n],!0)||(0===n?view.cancelPreSelectedNode(i,t):view.selectNode(i,t,2===n),i.treeObj.trigger(consts.event.CLICK,[e,i.treeId,t,n])),!0},onZTreeMousedown:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseDown,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseDown,[e,i.treeId,t]),!0},onZTreeMouseup:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseUp,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseUp,[e,i.treeId,t]),!0},onZTreeDblclick:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeDblClick,[i.treeId,t],!0)&&tools.apply(i.callback.onDblClick,[e,i.treeId,t]),!0},onZTreeContextmenu:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeRightClick,[i.treeId,t],!0)&&tools.apply(i.callback.onRightClick,[e,i.treeId,t]),'function'!=typeof i.callback.onRightClick},onSelectStart:function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return'input'===t||'textarea'===t}},tools={apply:function(e,t,i){return'function'==typeof e?e.apply(zt,t||[]):i},canAsync:function(e,t){var i=data.nodeChildren(e,t),n=data.nodeIsParent(e,t);return e.async.enable&&t&&n&&!(t.zAsync||i&&i.length>0)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var i in e)t[i]=e[i]instanceof Date?new Date(e[i].getTime()):'object'==typeof e[i]?tools.clone(e[i]):e[i];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return'[object Array]'===Object.prototype.toString.apply(e)},isElement:function(e){return'object'==typeof HTMLElement?e instanceof HTMLElement:e&&'object'==typeof e&&null!==e&&1===e.nodeType&&'string'==typeof e.nodeName},$:function(e,t,i){return t&&'string'!=typeof t&&(i=t,t=''),'string'==typeof e?$(e,i?i.treeObj.get(0).ownerDocument:null):$('#'+e.tId+t,i?i.treeObj:null)},getMDom:function(e,t,i){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var n=0,o=i.length;t.tagName&&n<o;n++)if(tools.eqs(t.tagName,i[n].tagName)&&null!==t.getAttribute(i[n].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent('li').get(0)||$(e).parentsUntil('li').parent().get(0)},isChildOrSelf:function(e,t){return $(e).closest('#'+t).length>0},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,i,n,o){var a=data.nodeIsParent(e,t);if(!e.data.keep.leaf||!t||a)if(tools.isArray(n)||(n=[n]),e.data.simpleData.enable&&(n=data.transformTozTreeFormat(e,n)),t){var s=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.ICON,e),l=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,s,consts.folder.CLOSE),view.replaceIcoClass(t,r,consts.folder.CLOSE),t.open=!1,l.css({display:'none'})),data.addNodesData(e,t,i,n),view.createNodes(e,t.level+1,n,t,i),o||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),i,n),view.createNodes(e,0,n,null,i)},appendNodes:function(e,t,i,n,o,a,s){if(!i)return[];var r,l,d=[],c=n||data.getRoot(e),h=data.nodeChildren(e,c);(!h||o>=h.length-i.length)&&(o=-1);for(var u=0,f=i.length;u<f;u++){var p=i[u];a&&(r=(0===o||h.length==i.length)&&0==u,l=o<0&&u==i.length-1,data.initNode(e,t,p,n,r,l,s),data.addNodeCache(e,p));var m=data.nodeIsParent(e,p),g=[],v=data.nodeChildren(e,p);v&&v.length>0&&(g=view.appendNodes(e,t+1,v,p,-1,a,s&&p.open)),s&&(view.makeDOMNodeMainBefore(d,e,p),view.makeDOMNodeLine(d,e,p),data.getBeforeA(e,p,d),view.makeDOMNodeNameBefore(d,e,p),data.getInnerBeforeA(e,p,d),view.makeDOMNodeIcon(d,e,p),data.getInnerAfterA(e,p,d),view.makeDOMNodeNameAfter(d,e,p),data.getAfterA(e,p,d),m&&p.open&&view.makeUlHtml(e,p,d,g.join('')),view.makeDOMNodeMainAfter(d,e,p),data.addCreatedNode(e,p))}return d},appendParentULDom:function(e,t){var i=[],n=$$(t,e);!n.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),n=$$(t,e));var o=$$(t,consts.id.UL,e);o.get(0)&&o.remove();var a=data.nodeChildren(e,t),s=view.appendNodes(e,t.level+1,a,t,-1,!1,!0);view.makeUlHtml(e,t,i,s.join('')),n.append(i.join(''))},asyncNode:function(setting,node,isSilent,callback){var i,l,isParent=data.nodeIsParent(setting,node);if(node&&!isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:'','class':consts.className.BUTTON+' '+consts.className.ICO_LOADING})}var tmpParam={},autoParam=tools.apply(setting.async.autoParam,[setting.treeId,node],setting.async.autoParam);for(i=0,l=autoParam.length;node&&i<l;i++){var pKey=autoParam[i].split('='),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}var otherParam=tools.apply(setting.async.otherParam,[setting.treeId,node],setting.async.otherParam);if(tools.isArray(otherParam))for(i=0,l=otherParam.length;i<l;i+=2)tmpParam[otherParam[i]]=otherParam[i+1];else for(var p in otherParam)tmpParam[p]=otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:setting.async.contentType.indexOf('application/json')>-1?JSON.stringify(tmpParam):tmpParam,dataType:setting.async.dataType,headers:setting.async.headers,xhrFields:setting.async.xhrFields,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?'string'==typeof msg?eval('('+msg+')'):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&''!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,i){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,i]))}}),!0},cancelPreSelectedNode:function(e,t,i){var n,o,a=data.getRoot(e).curSelectedList;for(n=a.length-1;n>=0;n--)if(t===(o=a[n])||!t&&(!i||i!==o)){if($$(o,consts.id.A,e).removeClass(consts.node.CURSELECTED),t){data.removeSelectedNode(e,t);break}a.splice(n,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,o])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);t.createdNodes.length>0;){var i=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,i]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,i])}},createNodes:function(e,t,i,n,o){if(i&&0!=i.length){var a=data.getRoot(e),s=!n||n.open||!!$$(data.nodeChildren(e,n)[0],e).get(0);a.createdNodes=[];var r,l,d=view.appendNodes(e,t,i,n,o,!0,s);if(n){var c=$$(n,consts.id.UL,e);c.get(0)&&(r=c)}else r=e.treeObj;r&&(o>=0&&(l=r.children()[o]),o>=0&&l?$(l).before(d.join('')):r.append(d.join(''))),view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,i,n,o){var a,s=data.getRoot(e);if(t){var r=data.nodeChildren(e,t),l=data.nodeIsParent(e,t);if(s.expandTriggerFlag&&(a=o,o=function(){a&&a(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},s.expandTriggerFlag=!1),!t.open&&l&&(!$$(t,consts.id.UL,e).get(0)||r&&r.length>0&&!$$(r[0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open!=i){var d=$$(t,consts.id.UL,e),c=$$(t,consts.id.SWITCH,e),h=$$(t,consts.id.ICON,e);l?(t.open=!t.open,t.iconOpen&&t.iconClose&&h.attr('style',view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,c,consts.folder.OPEN),view.replaceIcoClass(t,h,consts.folder.OPEN),0==n||''==e.view.expandSpeed?(d.show(),tools.apply(o,[])):r&&r.length>0?d.slideDown(e.view.expandSpeed,o):(d.show(),tools.apply(o,[]))):(view.replaceSwitchClass(t,c,consts.folder.CLOSE),view.replaceIcoClass(t,h,consts.folder.CLOSE),0!=n&&''!=e.view.expandSpeed&&r&&r.length>0?d.slideUp(e.view.expandSpeed,o):(d.hide(),tools.apply(o,[])))):tools.apply(o,[])}else tools.apply(o,[])}else tools.apply(o,[])},expandCollapseParentNode:function(e,t,i,n,o){t&&(t.parentTId?(view.expandCollapseNode(e,t,i,n),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),i,n,o)):view.expandCollapseNode(e,t,i,n,o))},expandCollapseSonNode:function(e,t,i,n,o){var a=data.getRoot(e),s=t?data.nodeChildren(e,t):data.nodeChildren(e,a),r=!t&&n,l=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,s)for(var d=0,c=s.length;d<c;d++)s[d]&&view.expandCollapseSonNode(e,s[d],i,r);data.getRoot(e).expandTriggerFlag=l,view.expandCollapseNode(e,t,i,n,o)},isSelectedNode:function(e,t){if(!t)return!1;var i,n=data.getRoot(e).curSelectedList;for(i=n.length-1;i>=0;i--)if(t===n[i])return!0;return!1},makeDOMNodeIcon:function(e,t,i){var n=data.nodeName(t,i),o=t.view.nameIsHTML?n:n.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');e.push('<span id=\'',i.tId,consts.id.ICON,'\' title=\'\' treeNode',consts.id.ICON,' class=\'',view.makeNodeIcoClass(t,i),'\' style=\'',view.makeNodeIcoStyle(t,i),'\'></span><span id=\'',i.tId,consts.id.SPAN,'\' class=\'',consts.className.NAME,'\'>',o,'</span>')},makeDOMNodeLine:function(e,t,i){e.push('<span id=\'',i.tId,consts.id.SWITCH,'\' title=\'\' class=\'',view.makeNodeLineClass(t,i),'\' treeNode',consts.id.SWITCH,'></span>')},makeDOMNodeMainAfter:function(e,t,i){e.push('</li>')},makeDOMNodeMainBefore:function(e,t,i){e.push('<li id=\'',i.tId,'\' class=\'',consts.className.LEVEL,i.level,'\' tabindex=\'0\' hidefocus=\'true\' treenode>')},makeDOMNodeNameAfter:function(e,t,i){e.push('</a>')},makeDOMNodeNameBefore:function(e,t,i){var n=data.nodeTitle(t,i),o=view.makeNodeUrl(t,i),a=view.makeNodeFontCss(t,i),s=view.makeNodeClasses(t,i),r=[];for(var l in a)r.push(l,':',a[l],';');e.push('<a id=\'',i.tId,consts.id.A,'\' class=\'',consts.className.LEVEL,i.level,s.add?' '+s.add.join(' '):'','\' treeNode',consts.id.A,i.click?' onclick="'+i.click+'"':'',null!=o&&o.length>0?' href=\''+o+'\'':'',' target=\'',view.makeNodeTarget(i),'\' style=\'',r.join(''),'\''),tools.apply(t.view.showTitle,[t.treeId,i],t.view.showTitle)&&n&&e.push('title=\'',n.replace(/'/g,'&#39;').replace(/</g,'&lt;').replace(/>/g,'&gt;'),'\''),e.push('>')},makeNodeFontCss:function(e,t){var i=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return i&&'function'!=typeof i?i:{}},makeNodeClasses:function(e,t){var i=tools.apply(e.view.nodeClasses,[e.treeId,t],e.view.nodeClasses);return i&&'function'!=typeof i?i:{add:[],remove:[]}},makeNodeIcoClass:function(e,t){var i=['ico'];if(!t.isAjaxing){var n=data.nodeIsParent(e,t);i[0]=(t.iconSkin?t.iconSkin+'_':'')+i[0],n?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU)}return consts.className.BUTTON+' '+i.join('_')},makeNodeIcoStyle:function(e,t){var i=[];if(!t.isAjaxing){var n=data.nodeIsParent(e,t)&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];n&&i.push('background:url(',n,') 0 0 no-repeat;'),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||i.push('display:none;')}return i.join('')},makeNodeLineClass:function(e,t){var i=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?i.push(consts.line.ROOT):0==t.level&&t.isFirstNode?i.push(consts.line.ROOTS):t.isLastNode?i.push(consts.line.BOTTOM):i.push(consts.line.CENTER):i.push(consts.line.NOLINE),data.nodeIsParent(e,t)?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+i.join('_')},makeNodeLineClassEx:function(e){return consts.className.BUTTON+' '+consts.className.LEVEL+e.level+' '+consts.className.SWITCH+' '},makeNodeTarget:function(e){return e.target||'_blank'},makeNodeUrl:function(e,t){var i=e.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(e,t,i,n){i.push('<ul id=\'',t.tId,consts.id.UL,'\' class=\'',consts.className.LEVEL,t.level,' ',view.makeUlLineClass(e,t),'\' style=\'display:',t.open?'block':'none','\'>'),i.push(n),i.push('</ul>')},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:''},removeChildNodes:function(e,t){if(t){var i=data.nodeChildren(e,t);if(i){for(var n=0,o=i.length;n<o;n++)data.removeNodeCache(e,i[n]);if(data.removeSelectedNode(e),delete t[e.data.key.children],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{data.nodeIsParent(e,t,!1),t.open=!1;var a=$$(t,consts.id.SWITCH,e),s=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,a,consts.folder.DOCU),view.replaceIcoClass(t,s,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},scrollIntoView:function(e,t){if(t)if('undefined'!=typeof Element&&'undefined'!=typeof HTMLElement)Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){'use strict';function t(e,t){return{start:e,length:t,end:e+t}}function i(t,i){return!1===e||i.start<t.end&&t.start<i.end?Math.max(t.end-i.length,Math.min(i.start,t.start)):(t.start+t.end-i.length)/2}function n(e,t){return{x:e,y:t,translate:function(i,o){return n(e+i,t+o)}}}function o(e,t){for(;e;)t=t.translate(e.offsetLeft,e.offsetTop),e=e.offsetParent;return t}for(var a,s=o(this,n(0,0)),r=n(this.offsetWidth,this.offsetHeight),l=this.parentNode;l instanceof HTMLElement;)a=o(l,n(l.clientLeft,l.clientTop)),l.scrollLeft=i(t(s.x-a.x,r.x),t(l.scrollLeft,l.clientWidth)),l.scrollTop=i(t(s.y-a.y,r.y),t(l.scrollTop,l.clientHeight)),s=s.translate(-l.scrollLeft,-l.scrollTop),l=l.parentNode}),t.scrollIntoViewIfNeeded();else{var i=e.treeObj.get(0).getBoundingClientRect(),n=t.getBoundingClientRect();(n.top<i.top||n.bottom>i.bottom||n.right>i.right||n.left<i.left)&&t.scrollIntoView()}},setFirstNode:function(e,t){var i=data.nodeChildren(e,t);i.length>0&&(i[0].isFirstNode=!0)},setLastNode:function(e,t){var i=data.nodeChildren(e,t);i.length>0&&(i[i.length-1].isLastNode=!0)},removeNode:function(e,t){var i=data.getRoot(e),n=t.parentTId?t.getParentNode():i;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var o=data.nodeChildren(e,n),a=0,s=o.length;a<s;a++)if(o[a].tId==t.tId){o.splice(a,1);break}view.setFirstNode(e,n),view.setLastNode(e,n);var r,l,d,c=o.length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&c>0){var h=o[c-1];if(r=$$(h,consts.id.UL,e),l=$$(h,consts.id.SWITCH,e),d=$$(h,consts.id.ICON,e),n==i)if(1==o.length)view.replaceSwitchClass(h,l,consts.line.ROOT);else{var u=$$(o[0],consts.id.SWITCH,e);view.replaceSwitchClass(o[0],u,consts.line.ROOTS),view.replaceSwitchClass(h,l,consts.line.BOTTOM)}else view.replaceSwitchClass(h,l,consts.line.BOTTOM);r.removeClass(consts.line.LINE)}}else data.nodeIsParent(e,n,!1),n.open=!1,delete n[e.data.key.children],r=$$(n,consts.id.UL,e),l=$$(n,consts.id.SWITCH,e),d=$$(n,consts.id.ICON,e),view.replaceSwitchClass(n,l,consts.folder.DOCU),view.replaceIcoClass(n,d,consts.folder.DOCU),r.css('display','none')}},replaceIcoClass:function(e,t,i){if(t&&!e.isAjaxing){var n=t.attr('class');if(n!=undefined){var o=n.split('_');switch(i){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[o.length-1]=i}t.attr('class',o.join('_'))}}},replaceSwitchClass:function(e,t,i){if(t){var n=t.attr('class');if(n!=undefined){var o=n.split('_');switch(i){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:o[0]=view.makeNodeLineClassEx(e)+i;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[1]=i}t.attr('class',o.join('_')),i!==consts.folder.DOCU?t.removeAttr('disabled'):t.attr('disabled','disabled')}}},selectNode:function(e,t,i){i||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeFontCss(e,t);n&&i.css(n)},setNodeClasses:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeClasses(e,t);'add'in n&&n.add.length&&i.addClass(n.add.join(' ')),'remove'in n&&n.remove.length&&i.removeClass(n.remove.join(' '))},setNodeLineIcos:function(e,t){if(t){var i=$$(t,consts.id.SWITCH,e),n=$$(t,consts.id.UL,e),o=$$(t,consts.id.ICON,e),a=view.makeUlLineClass(e,t);0==a.length?n.removeClass(consts.line.LINE):n.addClass(a),i.attr('class',view.makeNodeLineClass(e,t)),data.nodeIsParent(e,t)?i.removeAttr('disabled'):i.attr('disabled','disabled'),o.removeAttr('style'),o.attr('style',view.makeNodeIcoStyle(e,t)),o.attr('class',view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var i=data.nodeTitle(e,t),n=$$(t,consts.id.SPAN,e);(n.empty(),e.view.nameIsHTML?n.html(data.nodeName(e,t)):n.text(data.nodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle))&&$$(t,consts.id.A,e).attr('title',i||'')},setNodeTarget:function(e,t){$$(t,consts.id.A,e).attr('target',view.makeNodeTarget(t))},setNodeUrl:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeUrl(e,t);null==n||0==n.length?i.removeAttr('href'):i.attr('href',n)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t||null},destroy:function(e){if(e&&e.length>0)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,i){var n=tools.clone(_setting);$.extend(!0,n,t),n.treeId=e.attr('id'),n.treeObj=e,n.treeObj.empty(),settings[n.treeId]=n,'undefined'==typeof document.body.style.maxHeight&&(n.view.expandSpeed=''),data.initRoot(n);var o=data.getRoot(n);i=i?tools.clone(tools.isArray(i)?i:[i]):[],n.data.simpleData.enable?data.nodeChildren(n,o,data.transformTozTreeFormat(n,i)):data.nodeChildren(n,o,i),data.initCache(n),event.unbindTree(n),event.bindTree(n),event.unbindEvent(n),event.bindEvent(n);var a={setting:n,addNodes:function(e,t,i,o){e||(e=null);var a=data.nodeIsParent(n,e);if(e&&!a&&n.data.keep.leaf)return null;var s=parseInt(t,10);if(isNaN(s)?(o=!!i,i=t,t=-1):t=s,!i)return null;var r=tools.clone(tools.isArray(i)?i:[i]);function l(){view.addNodes(n,e,t,r,1==o)}return tools.canAsync(n,e)?view.asyncNode(n,e,o,l):l(),r},cancelSelectedNode:function(e){view.cancelPreSelectedNode(n,e)},destroy:function(){view.destroy(n)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(n,null,e,!0),e},expandNode:function(e,t,i,o,a){return e&&data.nodeIsParent(n,e)?(!0!==t&&!1!==t&&(t=!e.open),(a=!!a)&&t&&0==tools.apply(n.callback.beforeExpand,[n.treeId,e],!0)||a&&!t&&0==tools.apply(n.callback.beforeCollapse,[n.treeId,e],!0)?null:(t&&e.parentTId&&view.expandCollapseParentNode(n,e.getParentNode(),t,!1),t!==e.open||i?(data.getRoot(n).expandTriggerFlag=a,!tools.canAsync(n,e)&&i?view.expandCollapseSonNode(n,e,t,!0,s):(e.open=!t,view.switchNode(this.setting,e),s()),t):null)):null;function s(){var t=$$(e,consts.id.A,n).get(0);t&&!1!==o&&view.scrollIntoView(n,t)}},getNodes:function(){return data.getNodes(n)},getNodeByParam:function(e,t,i){return e?data.getNodeByParam(n,i?data.nodeChildren(n,i):data.getNodes(n),e,t):null},getNodeByTId:function(e){return data.getNodeCache(n,e)},getNodesByParam:function(e,t,i){return e?data.getNodesByParam(n,i?data.nodeChildren(n,i):data.getNodes(n),e,t):null},getNodesByParamFuzzy:function(e,t,i){return e?data.getNodesByParamFuzzy(n,i?data.nodeChildren(n,i):data.getNodes(n),e,t):null},getNodesByFilter:function(e,t,i,o){return t=!!t,e&&'function'==typeof e?data.getNodesByFilter(n,i?data.nodeChildren(n,i):data.getNodes(n),e,t,o):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=e.parentTId?e.getParentNode():data.getRoot(n),i=data.nodeChildren(n,t),o=0,a=i.length;o<a;o++)if(i[o]==e)return o;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(n).curSelectedList,i=0,o=t.length;i<o;i++)e.push(t[i]);return e},isSelectedNode:function(e){return data.isSelectedNode(n,e)},reAsyncChildNodesPromise:function(e,t,i){return new Promise((function(n,o){try{a.reAsyncChildNodes(e,t,i,(function(){n(e)}))}catch(s){o(s)}}))},reAsyncChildNodes:function(e,t,i,o){if(this.setting.async.enable){var a=!e;if(a&&(e=data.getRoot(n)),'refresh'==t){for(var s=data.nodeChildren(n,e),r=0,l=s?s.length:0;r<l;r++)data.removeNodeCache(n,s[r]);if(data.removeSelectedNode(n),data.nodeChildren(n,e,[]),a)this.setting.treeObj.empty();else $$(e,consts.id.UL,n).empty()}view.asyncNode(this.setting,a?null:e,!!i,o)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(n),t=data.nodeChildren(n,e);data.initRoot(n),data.nodeChildren(n,e,t),data.initCache(n),view.createNodes(n,0,data.nodeChildren(n,e),null,-1)},removeChildNodes:function(e){if(!e)return null;var t=data.nodeChildren(n,e);return view.removeChildNodes(n,e),t||null},removeNode:function(e,t){e&&((t=!!t)&&0==tools.apply(n.callback.beforeRemove,[n.treeId,e],!0)||(view.removeNode(n,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[n.treeId,e])))},selectNode:function(e,t,i){if(e&&tools.uCanDo(n)){if(t=n.view.selectedMulti&&t,e.parentTId)view.expandCollapseParentNode(n,e.getParentNode(),!0,!1,(function(){if(i)return;var t=$$(e,n).get(0);view.scrollIntoView(n,t)}));else if(!i)try{$$(e,n).focus().blur()}catch(o){}view.selectNode(n,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(n,e)},transformToArray:function(e){return data.transformToArrayFormat(n,e)},updateNode:function(e,t){e&&($$(e,n).get(0)&&tools.uCanDo(n)&&(view.setNodeName(n,e),view.setNodeTarget(n,e),view.setNodeUrl(n,e),view.setNodeLineIcos(n,e),view.setNodeFontCss(n,e),view.setNodeClasses(n,e)))}};o.treeTools=a,data.setZTreeTools(n,a);var s=data.nodeChildren(n,o);return s&&s.length>0?view.createNodes(n,0,s,null,-1):n.async.enable&&n.async.url&&''!==n.async.url&&view.asyncNode(n),a}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery)}).call(this,__webpack_require__(463))},828:function(e,t,i){e.exports=i(469)('<div class="recall-wrap j-recall-wrap"> {{#if isConfirm }} <p class="j-recall-confirm"> {{i18n "mail/recall_todo"}}<br/> {{i18n "mail/recall_detail"}} </p> {{/if}} {{#if isFail}} <p class="j-recall-fail"> {{ recallFailReason }} </p> {{/if}} {{#if isSuccess}} <div class="j-recall-success u-scroll" style="max-height:350px;"> <p>{{i18n "mail/recall_succ_message"}}</p> <table class="u-table"> <tbody> {{#each recallData}} <tr> <td>{{emailAddress}}</td> <td>{{recallMessage}}</td> </tr> {{/each}} </tbody> </table> </div> {{/if}} </div>',{})},841:function(e,t,i){e.exports=i(469)('<div class="c-filetonfbox "> <div class="c-filebox-content j-filebox-content u-scroll"> <ul class="c-filebox-crumb u-crumb j-crumb"></ul> <div class="c-filebox-list-wrap j-filelist-wrap"></div> </div> </div>',{forbiddenTpl:'{{i18n "file/msg_filebox_forbidden"}}',auth2Tpl:'<div class="c-filebox-auth2lock"> <div class="c-filebox-auth2lock-wrap"></div> </div>',folderTreeTpl:'<li>{{i18n "nf/bf_path"}}&nbsp;</li> <li class="j-hiddenPath f-dn"> <a href="javascript:void(0);" class="j-trigger-path" title="">..</a> </li> {{#each parents}} <li class="j-parentPath" data-fid="{{id}}"> {{#if isRoot}} <a href="javascript:void(0);" class="j-trigger-path" data-fid="{{id}}">{{i18n "main/pfdr_root"}}</a> {{else}} <i>&gt;</i> <a href="javascript:void(0);" class="j-trigger-path" data-fid="{{id}}">{{name}}</a> {{/if}} </li> {{/each}}',folderListTpl:'{{#if isBlank}} {{{blankMsg}}} {{else}} <div class="c-filebox-list onlyFolder"> <table class="u-table u-table-row"> <tbody> {{#each subFolders}} <tr class="folder-item"> <td class="col-name"> <i class="file-small-icon icon-small-folder"></i> <a href="javascript:void(0);" class="j-trigger-path" data-fid="{{id}}">{{name}}</a> </td> </tr> {{/each}} </tbody> </table> </div> {{/if}}',newFolderTpl:'<div class="c-filebox-newfolder j-filebox-newfolder"> <i class="file-small-icon icon-small-folder"></i> <input type="text" class="u-input j-folderName" role="name" placeholder="{{i18n \'main/fdr_name\'}}" data-placeholder="{{i18n \'main/fdr_name\'}}" /> <span> <a href="javascript:void(0);" class="c-filebox-newfolder-cancel j-cancel" title="{{i18n \'main/bt_cancel\'}}"><i class="iconfont iconmistake"></i></a> <a href="javascript:void(0);" class="c-filebox-newfolder-confirm j-confirm" title="{{i18n \'main/bt_ok\'}}"><i class="iconfont iconpass"></i></a> </span> <p class="explain j-explain"></p> </div>'})},843:function(e,t,i){e.exports=i(469)('<div class="c-xnffilebox"> <div class="u-input-control c-xnf-search"> <span class="u-input-container u-input-round"> <input type="text" class="j-search"> </span> <span class="iconfont iconsreachm"></span> <span class="iconfont iconenter" data-action="search"></span> </div> <div class="j-crumb"></div> <div class="c-filebox-content u-scroll"> </div> <div class="j-pagination"></div> </div>',{saveToFootTpl:'<button type="button" class="u-btn u-btn-primary btn-createFolder" data-action="createFolder">{{i18n "main/bt_createfolder"}}</button>',selectFromFootTpl:'<a class="c-checkAll" data-selectType="all" href="javascript:void(0);" data-action="checkAll"> {{i18n "mail/clipboard_select_all"}}</a> &nbsp;&nbsp;&nbsp;<a class="fileCount"></a>',newFolderTpl:'<div class="c-filebox-newfolder j-filebox-newfolder"> <i class="file-small-icon icon-small-folder"></i> <input type="text" class="u-input j-folderName" role="name" placeholder="{{i18n \'main/fdr_name\'}}" data-placeholder="{{i18n \'main/fdr_name\'}}" /> <span> <a href="javascript:void(0);" class="c-filebox-newfolder-cancel j-cancel" title="{{i18n \'main/bt_cancel\'}}"> <i class="iconfont iconmistake"></i></a> <a href="javascript:void(0);" class="c-filebox-newfolder-confirm j-confirm" title="{{i18n \'main/bt_ok\'}}"> <i class="iconfont iconpass"></i></a> </span> <p class="explain j-explain"></p> </div>',renameFolderTpl:'<div class="c-filebox-renamefolder j-filebox-renamefolder"> <input value="{{val}}" type="text" class="u-input j-folderName" role="name" data-placeholder="{{i18n \'main/fdr_name\'}}" /> <span> <a href="javascript:void(0);" class="c-filebox-renamefolder-cancel j-cancel" title="{{i18n \'main/bt_cancel\'}}"> <i class="iconfont iconmistake"></i></a> <a href="javascript:void(0);" class="c-filebox-renamefolder-confirm j-confirm" title="{{i18n \'main/bt_ok\'}}"> <i class="iconfont iconpass"></i></a> </span> <p class="explain j-explain"></p> </div>',attachmentInfoTpl:'<div class="c-filebox-attachment"> <div class="c-attachment-info"> <span>{{i18n "file/msg_xnfbox_name"}}</span> <input type="text" class="u-input c-newname" value="{{filename}}" /> <span class="c-newname-error f-dn"></span> </div> </div>',folderTreeTpl:'<ul class="c-filebox-crumb u-crumb"> <li>{{i18n "nf/bf_path"}}&nbsp;</li> <li class="c-up f-dn"> <a href="javascript:void(0);" class="j-trigger-path">..</a> </li> {{#each parents}} <li class="c-path"> {{#if isRoot}} <a href="javascript:void(0);" class="j-trigger-path" data-fid="{{id}}" data-path="{{path}}">{{i18n "main/fdr_root"}}</a> {{else}} <i>&gt;</i> <a href="javascript:void(0);" class="j-trigger-path" data-fid="{{id}}" data-path="{{path}}">{{name}}</a> {{/if}} </li> {{/each}} <li class="c-path f-dn j-search-result"> <i>&gt;</i>{{i18n "main/h_search_result"}} </li> </ul>',allListTpl:'<div class="c-filebox-list-wrap j-filelist-wrap"> {{#if isBlank}} {{{blankMsg}}} {{else}} <div class="c-filebox-list j-filelist"> <table class="u-table u-table-row"> <tbody> {{#each listResult}} {{#unless isFolder}} <tr class="file-item j-file-item" data-isFile="true" data-id="{{id}}" data-size="{{size}}" data-name="{{name}}" data-date="{{date}}"> <td class="col-chk"> <span> <input type="checkbox" class="u-input j-item-chk" /> </span> </td> <td class="col-name" title="{{name}}"> <i class="file-small-icon {{GetFileIco name \'icon-small-\'}}"></i> <span>{{name}}</span> </td> <td class="col-size">{{size$ size}}</td> {{#if ../feature.manage}} <td class="col-rename"><span data-action="rename">{{i18n "main/bt_rename"}}</span></td> {{/if}} </tr> {{else}} <tr class="file-item"> <td class="col-chk"> </td> <td class="col-name" title="{{name}}"> <i class="file-small-icon icon-small-folder"></i> <a href="javascript:void(0);" title="{{name}}" class="j-trigger-path" data-fid="{{id}}" data-path="{{path}}">{{name}}</a> </td> <td class="col-size"></td> {{#if ../feature.manage}} <td class="col-rename"><span data-action="rename">{{i18n "main/bt_rename"}}</span></td> {{/if}} </tr> {{/unless}} {{/each}} </tbody> </table> </div> {{/if}} </div>'})},872:function(e,t,i){var n,o,a;o=[i(463),i(492)],(a='function'==typeof(n=function(e){return e.fn.extend({disableSelection:(t='onselectstart'in document.createElement('div')?'selectstart':'mousedown',function(){return this.on(t+'.ui-disableSelection',(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off('.ui-disableSelection')}});var t})?n.apply(t,o):n)===undefined||(e.exports=a)},873:function(e,t,i){var n,o,a;o=[i(463),i(492)],(a='function'==typeof(n=function(e){return e.ui.plugin={add:function(t,i,n){var o,a=e.ui[t].prototype;for(o in n)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,a=e.plugins[t];if(a&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<a.length;o++)e.options[a[o][0]]&&a[o][1].apply(e.element,i)}}})?n.apply(t,o):n)===undefined||(e.exports=a)}}]);
//# sourceMappingURL=C~M~S.c2f53.js.map